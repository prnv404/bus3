<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Pay</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
			crossorigin="anonymous" />
	</head>
	<body>
		<div class="container p-5 d-flex justify-content-center">
			<button class="btn btn-success w-100" onclick="pay()">PAY</button>
		</div>

		<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
		<script>
			function pay() {
				var options = {
					key: "rzp_test_5yu10zqm98fSTU", // Enter the Key ID generated from the Dashboard
					amount: "<%= amount %>", // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
					currency: "INR",
					name: "bus3", //your business name
					description: "Test Transaction",
					image: "",
					order_id: "<%= order_id %>", //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
					handler: function (response) {
						console.log(response);
						// alert(response.razorpay_payment_id);
						// alert(response.razorpay_order_id);
						// alert(response.razorpay_signature)
						verifyPayment(response);
					},
					prefill: {
						name: "Gaurav Kumar", //your customer's name
						email: "gaurav.kumar@example.com",
						contact: "9000090000"
					},
					notes: {
						address: "Razorpay Corporate Office"
					},
					theme: {
						color: "#3399cc"
					}
				};

				var rzp1 = new Razorpay(options);

				rzp1.open();
			}

			function verifyPayment(payment) {
				fetch("/api/order/pay-verify", {
					method: "post",
					headers: {
						"Content-Type": "application/json"
					},
					body: JSON.stringify(payment)
				}).then((res) => {
					console.log(res);
				});
			}
		</script>

		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
			crossorigin="anonymous"></script>
	</body>
</html>
